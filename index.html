<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skyllor - Telegram Mini App</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://ad.gigapub.tech/script?id=1283"></script>
</head>
<body>
    <div class="app-container">
        <!-- Home Menu -->
        <div id="home-menu" class="menu-content active">
            <div class="dashboard">
                <h2>User Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Spins Today</h3>
                        <span id="spins-today">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Total Spins</h3>
                        <span id="total-spins">0</span>
                    </div>
                    <div class="stat-card">
                        <h3>Current Balance</h3>
                        <span id="current-balance">0</span> Sky
                    </div>
                </div>
            </div>
            
            <div class="popup-banner">
                <p>Go Fast, Rotate Your Spin & Earn Sky Token</p>
                <button class="rotate-spin-btn" onclick="switchMenu('spin')">Rotate Spin</button>
            </div>
            
            <button class="community-btn" onclick="openTelegramChannel()">
                Join Skyllor Community
            </button>
            
            <footer class="app-footer">
                <p>Developed By Skyllor</p>
            </footer>
        </div>

        <!-- Spin Menu -->
        <div id="spin-menu" class="menu-content">
            <div class="spin-stats">
                <div class="stat-row">
                    <span>Spins Today: <strong id="spin-spins-today">0</strong></span>
                    <span>Total Spins: <strong id="spin-total-spins">0</strong></span>
                </div>
            </div>
            
            <div class="spin-wheel-container">
                <canvas id="spin-wheel" width="300" height="300"></canvas>
                <div class="wheel-pointer"></div>
            </div>
            
            <div class="spin-controls">
                <button id="spin-button" class="spin-btn" onclick="handleSpin()">
                    Rotate Spin
                </button>
                <div id="countdown-timer" class="countdown hidden">
                    Next spin available in: <span id="countdown-text">00:00:00</span>
                </div>
            </div>
        </div>

        <!-- Payout Menu -->
        <div id="payout-menu" class="menu-content">
            <div class="balance-section">
                <h3>Current Balance</h3>
                <div class="balance-display">
                    <span id="payout-balance">0</span> Sky
                </div>
            </div>
            
            <div class="withdrawal-form">
                <h3>Withdrawal Form</h3>
                <form id="payout-form">
                    <input type="text" id="payout-name" placeholder="Name" required>
                    
                    <select id="payout-method" required>
                        <option value="">Select Payout Method</option>
                        <option value="Payeer">Payeer</option>
                        <option value="PayPal">PayPal</option>
                        <option value="Amazon Gift Card">Amazon Gift Card</option>
                    </select>
                    
                    <input type="number" id="payout-amount" placeholder="Payout Amount (Min: 150 Sky)" min="150" required>
                    
                    <input type="text" id="payout-address" placeholder="Payout Address" required>
                    
                    <button type="submit" class="submit-btn">Submit</button>
                </form>
            </div>
            
            <div class="payout-history">
                <h3>Payout History</h3>
                <div id="history-list">
                    <p class="no-history">No withdrawal history yet.</p>
                </div>
            </div>
        </div>

        <!-- Affiliate Menu -->
        <div id="affiliate-menu" class="menu-content">
            <div class="affiliate-content">
                <h2><strong>Join Affiliate Programme</strong></h2>
                <p class="affiliate-subtext">
                    After joining our Affiliate Programme, you can receive 20% lifetime commission from your active friends' earnings and win big rewards! Follow these simple rules to start now:
                </p>
                
                <div class="affiliate-steps">
                    <div class="step">
                        <h4>1. Copy Affiliate Link</h4>
                    </div>
                    <div class="step">
                        <h4>2. Share with Friends</h4>
                        <p>Use Telegram, WhatsApp, or Twitter to share your affiliate link.</p>
                    </div>
                    <div class="step">
                        <h4>3. To receive your commission & rewards, please contact our Affiliates Team.</h4>
                    </div>
                </div>
                
                <div class="affiliate-link-section">
                    <h4>Your Affiliate Link:</h4>
                    <div class="link-container">
                        <input type="text" id="affiliate-link" readonly>
                        <button onclick="copyAffiliateLink()" class="copy-btn">Copy</button>
                    </div>
                </div>
                
                <button class="contact-team-btn" onclick="openAffiliateBot()">
                    Contact Team
                </button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn active" onclick="switchMenu('home')" data-menu="home">
                <span>üè†</span>
                <span>Home</span>
            </button>
            <button class="nav-btn" onclick="switchMenu('spin')" data-menu="spin">
                <span>üéØ</span>
                <span>Spin</span>
            </button>
            <button class="nav-btn" onclick="switchMenu('payout')" data-menu="payout">
                <span>üí∞</span>
                <span>Payout</span>
            </button>
            <button class="nav-btn" onclick="switchMenu('affiliate')" data-menu="affiliate">
                <span>üë•</span>
                <span>Affiliate</span>
            </button>
        </nav>
    </div>

    <!-- Modals -->
    <div id="congratulations-modal" class="modal hidden">
        <div class="modal-content">
            <h3>üéâ Congratulations!</h3>
            <p>You earned 5 Sky points!</p>
            <button onclick="closeModal('congratulations-modal')" class="modal-btn">Great!</button>
        </div>
    </div>

    <div id="success-modal" class="modal hidden">
        <div class="modal-content">
            <h3>‚úÖ Success!</h3>
            <p>Your withdrawal request has been submitted successfully!</p>
            <button onclick="closeModal('success-modal')" class="modal-btn">OK</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
